name: OracleSignal One-Drop Monetized Deploy

on:
  push:
    branches: [ "main" ]
  workflow_dispatch:

jobs:
  trigger_signal:
    runs-on: ubuntu-latest
    steps:
    - name: WEBHOOK â†’ OracleSignal Business Engine
      run: |
        curl -X POST "https://oraclesignal.site/api/trigger" \
        -H "Content-Type: application/json" \
        -d "{
          \"source\": \"bbw-temple-site\",
          \"owner\": \"RagingAsian911\",
          \"action\": \"deploy\",
          \"payout\": \"paypal:charlesbuchanan89@yahoo.com\",
          \"indexed_url\": \"https://BBWTempleSite.org.uk\",
          \"timestamp\": \"$(date -Iseconds)\"
        }"

  build_monetized_output:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - name: Generate monetized storefront bundle
      run: |
        mkdir -p deployment
        cp index.html deployment/index.html
        echo "Temple storefront prepared for revenue routing."